#!/bin/bash

PGSQL_INSTALL="/home/cheng/COLO/apps/pgsql/7000"

dbname="dbtest"
client_num=16
table_num=80
record_num=10000
server_ip="127.0.0.1"

drop_db=`$PGSQL_INSTALL/install/bin/dropdb dbtest`
create_db=`$PGSQL_INSTALL/install/bin/createdb -O root dbtest`
init_db=`$PGSQL_INSTALL/install/bin/pgbench -i -U root dbtest -h 127.0.0.1 -j 10 -c 20 -p 7000`

echo "$drop_db"
echo "$create_db"
echo "$init_db"

PGSQL='$PGSQL_INSTALL/install/bin/psql -d dbtest -c'

for j in `seq 1 $table_num`;
do
	create_table=`$PGSQL_INSTALL/install/bin/psql -d $dbname -c "CREATE TABLE employee${j} (id int, salary int);"`
	echo "$create_table"

	QUERY="INSERT INTO employee${j} VALUES (1,5000)"

	for i in `seq 2 $record_num`;
	do
		ADD_QUERY=", ($i,5000)"
		QUERY=$QUERY$ADD_QUERY
	done
	eval $PGSQL "'$QUERY'"
done